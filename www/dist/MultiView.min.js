/*! Multiview - v0.0.0 - 2015-11-17
* oudy0001 at github
* Copyright (c) 2015 Christopher Oudyk; Licensed , ,  */
angular.module("starter",["ionic","starter.controllers"]).run(["$ionicPlatform",function(a){a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.listA",{url:"/listA",views:{menuContent:{templateUrl:"templates/list.html",controller:"ListController"}}}).state("app.listB",{url:"/listB",views:{menuContent:{templateUrl:"templates/list.html",controller:"ListController"}}}).state("app.listC",{url:"/listC",views:{menuContent:{templateUrl:"templates/list.html",controller:"ListController"}}}).state("app.options",{url:"/options",views:{menuContent:{templateUrl:"templates/options.html"}}}),b.otherwise("/app/listA")}]),angular.module("starter.controllers",[]).controller("AppCtrl",["$scope","$rootScope","optionsFactory","$ionicModal","$timeout",function(a,b,c,d,e){var f=c.getVibratePreference(),g=c.getAllCompletePreference();"true"==f?this.vibrateToggleBool=!0:this.vibrateToggleBool=!1,"true"==g?this.allCompleteToggleBool=!0:this.allCompleteToggleBool=!1,this.vibrateToggle=function(){c.setVibratePreference(this.vibrateToggleBool)},this.allCompleteToggle=function(){c.setAllCompletePreference(this.allCompleteToggleBool)}}]).controller("OptionsController"[function(a,b){}]).controller("ListController",["$scope","$stateParams","listHandlerFactory","localStorageFactory","optionsFactory",function(a,b,c,d,e){this.hrefNumber=document.URL.charAt(document.URL.length-1);var f="ca.edumedia/oudy0001/mad9135/list"+this.hrefNumber;localStorage.getItem(f);this.tasks=d.getItems(f),console.log(this.tasks),this["delete"]=function(a){c.deleteTask(a,this.tasks,f)},this.deleteAll=function(){c.deleteAll(this.tasks,f)},this.add=function(){c.addTask(this.newItem,this.tasks,f),this.newItem={}},this.checkCompleted=function(a){e.vibrateOnComplete(a,e.getVibratePreference()),d.setItems(f,this.tasks),e.noticeAllComplete(this.tasks,e.getAllCompletePreference())}}]),angular.module("starter").factory("listChecker",function(){return{validate:function(a){return null==a?[{text:"wake up",done:!0},{text:"get dressed",done:!0},{text:"go crazy",done:!1}]:a}}}).factory("localStorageFactory",["listChecker",function(a){return{getItems:function(b){var c=JSON.parse(localStorage.getItem(b));return a.validate(c)},setItems:function(a,b){return localStorage.setItem(a,JSON.stringify(b))}}}]).factory("listHandlerFactory",["localStorageFactory","optionsFactory",function(a,b){return{deleteTask:function(b,c,d){var e=c.indexOf(b);return c.splice(e,1),a.setItems(d,c),c},deleteAll:function(b,c){for(var d=0;d<b.length;d++)1==b[d].done&&(b.splice(d,1),d--);return a.setItems(c,b),b},addTask:function(b,c,d){var e=c[c.length-1].$$hashKey,f=e.slice(7,e.length),g=parseInt(f);return b.$$hashKey="object:"+(g+1),b.done=!1,c.push(b),a.setItems(d,c),c},taskCheck:function(a){for(var b=!0,c=0;c<a.length;c++)if(0==a[c].done){console.log("false"),b=!1;break}}}}]).factory("optionsFactory",["$rootScope","localStorageFactory",function(a,b){var c;return{vibrateOnComplete:function(a,b){var c=!0;0==a&&(c=!1),"false"==b&&(c=!1),c&&navigator.vibrate(300)},noticeAllComplete:function(a,b){for(var c=!0,d=0;d<a.length;d++)0==a[d].done&&(c=!1);b&&c&&cordova.plugins.notification.local.update({id:1,title:"You accomplished everthing on your list!"},0)},setVibratePreference:function(a){c=a;var d="ca.edumedia/oudy0001/mad9135/preferences/vibrate";b.setItems(d,a)},setAllCompletePreference:function(a){c=a;var d="ca.edumedia/oudy0001/mad9135/preferences/complete";b.setItems(d,a)},getVibratePreference:function(){var a="ca.edumedia/oudy0001/mad9135/preferences/vibrate",b=localStorage.getItem(a);return null==b?!0:b},getAllCompletePreference:function(){var a="ca.edumedia/oudy0001/mad9135/preferences/complete",b=localStorage.getItem(a);return null==b?!0:b}}}]);